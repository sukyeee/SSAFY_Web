<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

        // let data = [ 1,2,3 ];

        // function getData() {
        //     // 비동기 작업 수행
        //     setTimeout(() => {
                
        //     data.push(4);
        //     data.push(5);
        //     console.log("done!");
        //     }, 1000 ) 
        // }

        // function printData() {
        //     data.forEach( el => console.log( el ));
        // }

        // getData();
        // printData();


        let data = [ 1,2,3 ];


        // Promise 기반 function
        function getData(  ) {

            return new Promise( function( resolve, reject ) {
                // 비동기 작업이 성공하면 resolve
                // 비동기 작업이 실패하면 reject
                // 비동기 작업 수행
                setTimeout(() => {
                    data.push(4);
                    data.push(5);
                    console.log("done!");

                    // 성공, 실패
                    const error = false;
                    if( !error ) resolve();
                    else reject("error!!!!"); // reject는 메시지 호출 가능
                    }, 1000 ) 
                });
        }

        function printData() {
            data.forEach( el => console.log( el ));
        }

        getData()
        .then( printData )
        .catch( e => console.log(e) );

    </script>
</body>
</html>